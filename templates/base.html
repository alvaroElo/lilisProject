<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Dulcería Lilis - Sistema de Gestión{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}?v=1.1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% if user.is_authenticated %}
    <!-- Header -->
    <header class="main-header">
        <div class="header-container">
            <div class="header-left">
                <img src="{% static 'img/Logo-lilis-header.png' %}" alt="Dulcería Lilis" class="header-logo">
            </div>
            <div class="header-center">
                <h1 class="header-title">Sistema de Gestión - Dulcería Lilis</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span class="user-name">{{ user.get_full_name|default:user.username }}</span>
                    <span class="user-role">{{ user.usuario_profile.rol.get_nombre_display }}</span>
                </div>
                <a href="{% url 'logout' %}" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </a>
            </div>
        </div>
    </header>

    <!-- Navigation Menu -->
    <nav class="main-nav">
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="{% url 'dashboard' %}" class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                    <i class="fas fa-home"></i> Inicio
                </a>
            </li>
            
            {% if perms.maestros.view_producto %}
            <li class="nav-item">
                <a href="{% url 'productos_list' %}" class="nav-link {% if 'productos' in request.path %}active{% endif %}">
                    <i class="fas fa-box"></i> Productos
                </a>
            </li>
            {% endif %}
            
            {% if perms.maestros.view_proveedor %}
            <li class="nav-item">
                <a href="{% url 'proveedores_list' %}" class="nav-link {% if 'proveedores' in request.path %}active{% endif %}">
                    <i class="fas fa-truck"></i> Proveedores
                </a>
            </li>
            {% endif %}
            
            {% if perms.inventario.view_movimientoinventario %}
            <li class="nav-item">
                <a href="{% url 'inventario_list' %}" class="nav-link {% if 'inventario' in request.path %}active{% endif %}">
                    <i class="fas fa-warehouse"></i> Inventario
                </a>
            </li>
            {% endif %}
            
            {% if perms.autenticacion.view_usuario %}
            <li class="nav-item">
                <a href="{% url 'usuarios_list' %}" class="nav-link {% if 'usuarios' in request.path %}active{% endif %}">
                    <i class="fas fa-users"></i> Usuarios
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

    <!-- Main Content -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    {% if user.is_authenticated %}
    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-left">
                <img src="{% static 'img/Logo-lilis-footer.png' %}" alt="Dulcería Lilis" class="footer-logo">
            </div>
            <div class="footer-center">
                <p>&copy; 2025 Dulcería Lilis. Todos los derechos reservados.</p>
                <p>Sistema de Gestión de Inventario v1.0</p>
            </div>
            <div class="footer-right">
                <p>Soporte: soporte@dulcerialilis.com</p>
                <p>Tel: (123) 456-7890</p>
            </div>
        </div>
    </footer>
    {% endif %}

    <!-- Scripts -->
    <script src="{% static 'js/validaciones.js' %}?v=1.1"></script>
    <script src="{% static 'js/main.js' %}?v=1.1"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
